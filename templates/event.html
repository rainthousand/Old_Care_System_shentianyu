<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr">
<!-- BEGIN: Head-->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title></title>
    <link rel="apple-touch-icon" href="../static/app-assets/images/ico/apple-icon-120.png">
    <link rel="shortcut icon" type="image/x-icon" href="../static/app-assets/images/ico/favicon.ico">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,600" rel="stylesheet">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="../static/app-assets/vendors/css/vendors.min.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/vendors/css/charts/apexcharts.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/vendors/css/extensions/tether-theme-arrows.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/vendors/css/extensions/tether.min.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/vendors/css/extensions/shepherd-theme-default.css">
    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="http://cdn.bootstrapmb.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/css/bootstrap-extended.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/css/colors.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/css/components.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/css/themes/dark-layout.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/css/themes/semi-dark-layout.css">

    <!-- BEGIN: Page CSS-->
	<link rel="stylesheet" type="text/css" href="../../../static/app-assets/vendors/css/charts/apexcharts.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/css/core/menu/menu-types/vertical-menu.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/css/core/colors/palette-gradient.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/css/pages/dashboard-analytics.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/css/pages/card-analytics.css">
    <link rel="stylesheet" type="text/css" href="../static/app-assets/css/plugins/tour/tour.css">
	<link rel="stylesheet" type="text/css" href="../static/app-assets/vendors/css/tables/datatable/datatables.min.css">
    <!-- END: Page CSS-->
<link rel="stylesheet" type="text/css" href="../static/app-assets/css/plugins/extensions/toastr.css">

	<link rel="stylesheet" type="text/css" href="../static/app-assets/vendors/css/extensions/toastr.css">
    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="../assets/css/style.css">
    <!-- END: Custom CSS-->
	<style>
		.orgs-container::-webkit-scrollbar {    /*滚动条整体样式*/
		        width: 10px;                        /*高宽分别对应横竖滚动条的尺寸*/
		        height: 1px;
		    }
		    .orgs-container::-webkit-scrollbar-thumb {  /*滚动条里面小方块*/
		        border-radius: 10px;
		        -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.01);
		        background: #ebebeb;
		    }
		    .orgs-container::-webkit-scrollbar-track {  /*滚动条里面轨道*/
		        /* -webkit-box-shadow: inset 0 0 5px rgba(0,0,0,0.2); */
		        border-radius: 10px;
		        background: #fff;
		    }

	</style>

</head>
<!-- END: Head-->

<!-- BEGIN: Body-->

<body class="vertical-layout vertical-menu-modern 2-columns  navbar-floating footer-static   menu-collapsed" data-open="click" data-menu="vertical-menu-modern" data-col="2-columns">

    <!-- BEGIN: Main Menu-->
    <div class="main-menu menu-fixed menu-light menu-accordion menu-shadow" data-scroll-to-active="true">
        <div class="navbar-header">
            <ul class="nav navbar-nav flex-row">
                <li class="nav-item mr-auto"><a class="navbar-brand">
                        <div class="brand-logo"></div>
                        <h2 class="brand-text mb-0">智慧养老系统</h2>
                    </a></li>
                <li class="nav-item nav-toggle"><a class="nav-link modern-nav-toggle pr-0" data-toggle="collapse"><i class="feather icon-x d-block d-xl-none font-medium-4 primary toggle-icon"></i><i class="toggle-icon feather icon-disc font-medium-4 d-none d-xl-block collapse-toggle-icon primary" data-ticon="icon-disc"></i></a></li>
            </ul>
        </div>
        <div class="shadow-bottom"></div>
        <div class="main-menu-content">
            <ul class="navigation navigation-main" id="main-menu-navigation" data-menu="menu-navigation">
                <li class=" nav-item"><a href="/index"><i class="feather icon-home"></i><span class="menu-title" data-i18n="Dashboard">首页</span></a>
                   
                </li>
                <li class=" navigation-header"><span></span>
                </li>
                <li class=" nav-item"><a href="/old-people"><i class="feather icon-mail"></i><span class="menu-title" data-i18n="Email">老年人信息管理</span></a>
                </li>
                <li class=" nav-item"><a href="/volunteer"><i class="feather icon-message-square"></i><span class="menu-title" data-i18n="Chat">义工信息管理</span></a>
                </li>
                <li class=" nav-item"><a href="/employee"><i class="feather icon-check-square"></i><span class="menu-title" data-i18n="Todo">工作人员信息管理</span></a>
                </li>
                <li class=" nav-item"><a href="/manager"><i class="feather icon-calendar"></i><span class="menu-title" data-i18n="Calender">系统管理员信息管理</span></a>
                </li>
        		<li class=" nav-item"><a href="/video"><i class="feather icon-circle"></i><span class="menu-title" data-i18n="Calender">实时监测</span></a>
        		</li>
        		<li class=" nav-item"><a href="/event"><i class="feather icon-zap"></i><span class="menu-title" data-i18n="Calender">事件管理</span></a>
        		</li>
                
            </ul>
        </div>
    </div>
    <!-- END: Main Menu-->
    
    <!-- BEGIN: Content-->
    <div class="app-content content">
    
        <!-- BEGIN: Header-->
        <div class="content-overlay"></div>
        <div class="header-navbar-shadow"></div>
        <nav class="header-navbar navbar-expand-lg navbar navbar-with-menu floating-nav navbar-light navbar-shadow">
            <div class="navbar-wrapper">
                <div class="navbar-container content">
                    <div class="navbar-collapse" id="navbar-mobile">
                        <div class="mr-auto float-left bookmark-wrapper d-flex align-items-center">
                            <ul class="nav navbar-nav">
                               <li class="nav-item d-none d-lg-block"><a class="nav-link nav-link-expand"><i class="ficon feather icon-maximize"></i></a></li>
                            </ul>
                            <ul class="nav navbar-nav">
    							<li class="nav-item d-none d-lg-block"><a onclick="window.location.href='/question'"><i class="ficon feather icon-help-circle"></i></a></li>
    
    						</ul>
                            <ul class="nav navbar-nav">
    							<li class="nav-item d-none d-lg-block"><a onclick="window.location.href='/calender'"><i class="ficon feather icon-calendar"></i></a></li>
    
    						</ul>
                        </div>
                        <ul class="nav navbar-nav float-right">
                            
                            
                            <li class="nav-item nav-search"><a class="nav-link nav-link-search"><i class="ficon feather icon-search"></i></a>
                                <div class="search-input">
                                    <div class="search-input-icon"><i class="feather icon-search primary"></i></div>
                                    <input class="input" type="text" placeholder="Explore ..." tabindex="-1" data-search="template-list" />
                                    <div class="search-input-close"><i class="feather icon-x"></i></div>
                                    <ul class="search-list"></ul>
                                </div>
                            </li>
                            <li class="dropdown dropdown-notification nav-item"><a class="nav-link nav-link-label" href="#" data-toggle="dropdown"><i class="ficon feather icon-bell"></i><span class="badge badge-pill badge-primary badge-up"></span></a>
                                <ul class="dropdown-menu dropdown-menu-media dropdown-menu-right">
                                    <li class="dropdown-menu-header">
                                        <div class="dropdown-header m-0 p-2">
                                            <h3 class="white">5 New</h3><span class="notification-title">Notifications</span>
                                        </div>
                                    </li>
                                    <li class="scrollable-container media-list"><a class="d-flex justify-content-between" href="javascript:void(0)">
                                            <div class="media d-flex align-items-start">
                                                <div class="media-left"><i class="feather icon-plus-square font-medium-5 primary"></i></div>
                                                <div class="media-body">
                                                    <h6 class="primary media-heading">You have new order!</h6><small class="notification-text"> Are your going to meet me tonight?</small>
                                                </div><small>
                                                    <time class="media-meta" datetime="2015-06-11T18:29:20+08:00">9 hours ago</time></small>
                                            </div>
                                        </a><a class="d-flex justify-content-between" href="javascript:void(0)">
                                            <div class="media d-flex align-items-start">
                                                <div class="media-left"><i class="feather icon-download-cloud font-medium-5 success"></i></div>
                                                <div class="media-body">
                                                    <h6 class="success media-heading red darken-1">99% Server load</h6><small class="notification-text">You got new order of goods.</small>
                                                </div><small>
                                                    <time class="media-meta" datetime="2015-06-11T18:29:20+08:00">5 hour ago</time></small>
                                            </div>
                                        </a><a class="d-flex justify-content-between" href="javascript:void(0)">
                                            <div class="media d-flex align-items-start">
                                                <div class="media-left"><i class="feather icon-alert-triangle font-medium-5 danger"></i></div>
                                                <div class="media-body">
                                                    <h6 class="danger media-heading yellow darken-3">Warning notifixation</h6><small class="notification-text">Server have 99% CPU usage.</small>
                                                </div><small>
                                                    <time class="media-meta" datetime="2015-06-11T18:29:20+08:00">Today</time></small>
                                            </div>
                                        </a><a class="d-flex justify-content-between" href="javascript:void(0)">
                                            <div class="media d-flex align-items-start">
                                                <div class="media-left"><i class="feather icon-check-circle font-medium-5 info"></i></div>
                                                <div class="media-body">
                                                    <h6 class="info media-heading">Complete the task</h6><small class="notification-text">Cake sesame snaps cupcake</small>
                                                </div><small>
                                                    <time class="media-meta" datetime="2015-06-11T18:29:20+08:00">Last week</time></small>
                                            </div>
                                        </a><a class="d-flex justify-content-between" href="javascript:void(0)">
                                            <div class="media d-flex align-items-start">
                                                <div class="media-left"><i class="feather icon-file font-medium-5 warning"></i></div>
                                                <div class="media-body">
                                                    <h6 class="warning media-heading">Generate monthly report</h6><small class="notification-text">Chocolate cake oat cake tiramisu marzipan</small>
                                                </div><small>
                                                    <time class="media-meta" datetime="2015-06-11T18:29:20+08:00">Last month</time></small>
                                            </div>
                                        </a></li>
                                    <li class="dropdown-menu-footer"><a class="dropdown-item p-1 text-center" href="javascript:void(0)">Read all notifications</a></li>
                                </ul>
                            </li>
                            <li class="dropdown dropdown-user nav-item"><a class="dropdown-toggle nav-link dropdown-user-link" href="#" data-toggle="dropdown">
                                    <div class="user-nav d-sm-flex d-none"><h1 id="head-username" class="mb-2" style="font-size: larger;">null</h1><span class="user-status">online</span></div><span><img class="round" src="../static/app-assets/images/portrait/small/avatar-s-11.png" alt="avatar" height="40" width="40" /></span>
                                </a>
                                <div class="dropdown-menu dropdown-menu-right"><a class="dropdown-item" href="page-user-profile.html"><i class="feather icon-user"></i> Edit Profile</a><a class="dropdown-item" href="app-email.html"><i class="feather icon-mail"></i> My Inbox</a><a class="dropdown-item" href="app-todo.html"><i class="feather icon-check-square"></i> Task</a><a class="dropdown-item" href="app-chat.html"><i class="feather icon-message-square"></i> Chats</a>
                                    <div class="dropdown-divider"></div><a class="dropdown-item" href="auth-login.html"><i class="feather icon-power"></i> Logout</a>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
        <!-- END: Header-->

        <div class="content-wrapper">
            <div class="content-header row">
            </div>
			<section id="apexchart">
			    <div class="row">
			        
			
			        <!-- Radial Bar Chart -->
			        <div class="col-lg-6 col-md-12">
			            <div class="card">
			                <div class="card-header">
			                    <h4 class="card-title"> </h4>
			                </div>
			                <div class="card-content">
			                    <div class="card-body">
			                        <div id="radial-bar-chart"></div>
			                    </div>
			                </div>
			            </div>
			        </div>
			
			        <div class="card" style="height: 610px;width: 500px;">
			        	<div class="card-header">
			        		<h4 class="card-title">事件时间线</h4>
			        	</div>
			        	<div class="card-content orgs-container" style="overflow: auto;">
			        		<div class="card-body  card-dashboard" >
			        			<ul id="event_timeline" class="activity-timeline timeline-left list-unstyled">
									<!-- <li>
										<div class="timeline-icon bg-success">
											<i class="feather icon-briefcase font-medium-2 align-middle"></i>
										</div>
										<div class="timeline-info">
											<p class="font-weight-bold mb-0">义工检测</p>
											<span class="font-small-3">Candy ice cream. Halvah bears Cupcake gummi bears.</span>
										</div>
										<small class="text-muted">28 days ago</small>
									</li>
									
									<li>
										<div class="timeline-icon bg-primary">
											<i class="feather icon-heart font-medium-2 align-middle"></i>
										</div>
										<div class="timeline-info">
											<p class="font-weight-bold mb-0">情感检测</p>
											<span class="font-small-3">Candy ice cream cake. Halvah gummi bears</span>
										</div>
										<small class="text-muted">20 days ago</small>
									</li>
									<li>
										<div class="timeline-icon bg-info">
											<i class="feather icon-bell font-medium-2 align-middle"></i>
										</div>
										<div class="timeline-info">
											<p class="font-weight-bold mb-0">陌生人检测</p>
											<span class="font-small-3">Candy ice cream cake. </span>
										</div>
										<small class="text-muted">25 days ago</small>
									</li>
									
			        				<li>
			        					<div class="timeline-icon bg-warning">
			        						<i class="feather icon-activity font-medium-2 align-middle"></i>
			        					</div>
			        					<div class="timeline-info">
			        						<p class="font-weight-bold mb-0">摔倒检测</p>
			        						<span class="font-small-3">Cupcake gummi bears soufflé caramels candy</span>
			        					</div>
			        					<small class="text-muted">15 days ago</small>
			        				</li>
									
			        				<li>
			        					<div class="timeline-icon bg-danger">
			        						<i class="feather icon-pause font-medium-2 align-middle"></i>
			        					</div>
			        					<div class="timeline-info">
			        						<p class="font-weight-bold mb-0">禁止区检测</p>
			        						<span class="font-small-3">Candy ice cream. Halvah bears Cupcake gummi bears.</span>
			        					</div>
			        					<small class="text-muted">28 days ago</small>
			        				</li> -->
			        				
			        			</ul>
			        		</div>	
			        		
			        	</div>
			        
			        </div>
			    </div>
			</section>
			
        </div>
		
		    
    </div>
    <!-- END: Content-->
	<script>
		var socket;
		var myMessage;
		
		window.onload=function(){
			var param = $.cookie("username"); 
			console.log(param); 
		
			var headusername=document.getElementById('head-username');
			headusername.innerHTML=param;
			
			var event_josn_text={"type":"event"};
			var num = new Array(5);
			
			$.ajax({
			
				url : "http://127.0.0.1:5000/event",
				type : "POST",
				async : true,
				data:JSON.stringify(event_josn_text),
				contentType:"application/json; charset=UTF-8",
				dataType : 'json',
				success:function(data){
					var str = [];
					
					for(var i = 0 ; i<5 ; i++){
						num[i] = 0;
					}
					//alert(text.length)
					//alert(text.people)
					for(var i in data){
						if(data[i].event_type==0){
							str.push(data[i].name)
							num[0] = num[0]+1
							//alert(str);
						}
						
						if(data[i].event_type==1){
							str.push(data[i].name)
						num[1] = num[1]+1
						//alert(str);
						}
						
						if(data[i].event_type==2){
							str.push(data[i].name)
						num[2] = num[2]+1
						//alert(str);
						}
						
						if(data[i].event_type==3){
							str.push(data[i].name)
						num[3] = num[3]+1
						//alert(str);
						}
						
						if(data[i].event_type==4){
							str.push(data[i].name)
						num[4] = num[4]+1
						//alert(str);
						}
					}
					
					//图表
					var $primary = '#7367F0',
					  $success = '#28C76F',
					  $danger = '#EA5455',
					  $warning = '#FF9F43',
					  $info = '#00cfe8',
					  $label_color_light = '#dae1e7';
					
					var themeColors = [$primary, $success, $danger, $warning, $info];
					var sum=num[0]+num[1]+num[2]+num[3]+num[4];
					
					// Radial Bar Chart
					// -----------------------------
					var radialBarChartOptions = {
					  chart: {
					    height: 555,
					    type: 'radialBar',
					  },
					  colors: themeColors,
					  plotOptions: {
					    radialBar: {
					      dataLabels: {
					        name: {
					          fontSize: '22px',
					        },
					        value: {
					          fontSize: '16px',
					        },
					        total: {
					          show: true,
					          label: 'Total',
					          // color: $label_color,
					          formatter: function (w) {
					            // By default this function returns the average of all series. The below is just an example to show the use of custom formatter function
					            return sum;
					          }
					        }
					      }
					    }
					  },
					  series: [num[0]*100/sum, num[1]*100/sum, num[2]*100/sum, num[3]*100/sum,num[4]*100/sum],
					  labels: ['情感检测', '义工检测', '陌生人检测', '摔倒检测','禁止区域入侵检测'],
					}
					var radialBarChart = new ApexCharts(
					  document.querySelector("#radial-bar-chart"),
					  radialBarChartOptions
					);
					radialBarChart.render();
			
					var timelineul=document.getElementById('event_timeline');
					
					for(var i in data){
						
						switch(data[i].event_type){
							case 0:
								timelineul.innerHTML=timelineul.innerHTML+'<li><div class="timeline-icon bg-primary"><i class="feather icon-heart font-medium-2 align-middle"></i></div><div class="timeline-info"><p class="font-weight-bold mb-0">'+'['+data[i].oldperson_id+']  情感检测</p><span class="font-small-3">'+data[i].event_desc+'</span></div><small class="text-muted">'+data[i].event_location+'    '+data[i].event_date+'</small></li>'
							
								// var timelineli=document.createElement('li');
								// var timelinediv1=document.createElement('div');
								// var timelinediv2=document.createElement('div');
								// var timelinei=document.createElement('i');
								// var timelinep=document.createElement('p');
								// var timelinespan=document.createElement('span');
								// var timelinesmall=document.createElement('small');
								
								// timelinediv1.setAttribute('class',"timeline-icon bg-primary");
								// timelinei.setAttribute('class',"feather icon-heart font-medium-2 align-middle");
								// timelinediv2.setAttribute('class',"timeline-info");
								// timelinep.setAttribute('class',"timeline-icon bg-primary");
								// timelinespan.setAttribute('class',"font-small-3");
								// timelinesmall.setAttribute('class',"text-muted");
								// timelinep.setAttribute('value','['+data[i].oldperson_id+']  情感检测');
								// timelinespan.setAttribute('value',data[i].event_desc);
								// timelinesmall.setAttribute('value',data[i].event_location+'    '+data[i].event_date);
								
								// timelinediv1.appendChild(timelinei);
								// timelinediv2.appendChild(timelinep);
								// timelinediv2.appendChild(timelinespan);
								
								// timelineli.appendChild(timelinediv1);
								// timelineli.appendChild(timelinediv2);
								// timelineli.appendChild(timelinesmall);
								// timelineul.appendChild(timelineli);
								
								break;
							case 1:
								timelineul.innerHTML=timelineul.innerHTML+'<li><div class="timeline-icon bg-success"><i class="feather icon-briefcase font-medium-2 align-middle"></i></div><div class="timeline-info"><p class="font-weight-bold mb-0">'+'['+data[i].oldperson_id+']  义工交互检测</p><span class="font-small-3">'+data[i].event_desc+'</span></div><small class="text-muted">'+data[i].event_location+'    '+data[i].event_date+'</small></li>'
								
								// var timelineli=document.createElement('li');
								// var timelinediv1=document.createElement('div');
								// var timelinediv2=document.createElement('div');
								// var timelinei=document.createElement('i');
								// var timelinep=document.createElement('p');
								// var timelinespan=document.createElement('span');
								// var timelinesmall=document.createElement('small');
								
								// timelinediv1.setAttribute('class',"timeline-icon bg-success");
								// timelinei.setAttribute('class',"feather icon-briefcase font-medium-2 align-middle");
								// timelinediv2.setAttribute('class',"timeline-info");
								// timelinep.setAttribute('class',"timeline-icon bg-primary");
								// timelinespan.setAttribute('class',"font-small-3");
								// timelinesmall.setAttribute('class',"text-muted");
								// timelinep.setAttribute('value','['+data[i].oldperson_id+']  义工交互检测');
								// timelinespan.setAttribute('value',data[i].event_desc);
								// timelinesmall.setAttribute('value',data[i].event_location+'    '+data[i].event_date);
								
								// timelinediv1.appendChild(timelinei);
								// timelinediv2.appendChild(timelinep);
								// timelinediv2.appendChild(timelinespan);
								
								// timelineli.appendChild(timelinediv1);
								// timelineli.appendChild(timelinediv2);
								// timelineli.appendChild(timelinesmall);
								// timelineul.appendChild(timelineli);
								
								break;
							case 2:
								
								timelineul.innerHTML=timelineul.innerHTML+'<li><div class="timeline-icon bg-info"><i class="feather icon-bell font-medium-2 align-middle"></i></div><div class="timeline-info"><p class="font-weight-bold mb-0">'+'['+data[i].oldperson_id+']  陌生人检测</p><span class="font-small-3">'+data[i].event_desc+'</span></div><small class="text-muted">'+data[i].event_location+'    '+data[i].event_date+'</small></li>'
								
								
								// var timelineli=document.createElement('li');
								// var timelinediv1=document.createElement('div');
								// var timelinediv2=document.createElement('div');
								// var timelinei=document.createElement('i');
								// var timelinep=document.createElement('p');
								// var timelinespan=document.createElement('span');
								// var timelinesmall=document.createElement('small');
								
								// timelinediv1.setAttribute('class',"timeline-icon bg-info");
								// timelinei.setAttribute('class',"feather icon-bell font-medium-2 align-middle");
								// timelinediv2.setAttribute('class',"timeline-info");
								// timelinep.setAttribute('class',"timeline-icon bg-primary");
								// timelinespan.setAttribute('class',"font-small-3");
								// timelinesmall.setAttribute('class',"text-muted");
								// timelinep.setAttribute('value','['+data[i].oldperson_id+']  陌生人检测');
								// timelinespan.setAttribute('value',data[i].event_desc);
								// timelinesmall.setAttribute('value',data[i].event_location+'    '+data[i].event_date);
								
								// timelinediv1.appendChild(timelinei);
								// timelinediv2.appendChild(timelinep);
								// timelinediv2.appendChild(timelinespan);
								
								// timelineli.appendChild(timelinediv1);
								// timelineli.appendChild(timelinediv2);
								// timelineli.appendChild(timelinesmall);
								// timelineul.appendChild(timelineli);
								
								break;
							case 3:
							
								timelineul.innerHTML=timelineul.innerHTML+'<li><div class="timeline-icon bg-warning"><i class="feather icon-activity font-medium-2 align-middle"></i></div><div class="timeline-info"><p class="font-weight-bold mb-0">'+'['+data[i].oldperson_id+']  摔倒检测</p><span class="font-small-3">'+data[i].event_desc+'</span></div><small class="text-muted">'+data[i].event_location+'    '+data[i].event_date+'</small></li>'
								
							
							// 	var timelineli=document.createElement('li');
							// 	var timelinediv1=document.createElement('div');
							// 	var timelinediv2=document.createElement('div');
							// 	var timelinei=document.createElement('i');
							// 	var timelinep=document.createElement('p');
							// 	var timelinespan=document.createElement('span');
							// 	var timelinesmall=document.createElement('small');
								
							// 	timelinediv1.setAttribute('class',"timeline-icon bg-warning");
							// 	timelinei.setAttribute('class',"feather icon-activity font-medium-2 align-middle");
							// 	timelinediv2.setAttribute('class',"timeline-info");
							// 	timelinep.setAttribute('class',"timeline-icon bg-primary");
							// 	timelinespan.setAttribute('class',"font-small-3");
							// 	timelinesmall.setAttribute('class',"text-muted");
							// 	timelinep.setAttribute('value','['+data[i].oldperson_id+']  摔倒检测');
							// 	timelinespan.setAttribute('value',data[i].event_desc);
							// 	timelinesmall.setAttribute('value',data[i].event_location+'    '+data[i].event_date);
								
							// 	timelinediv1.appendChild(timelinei);
							// 	timelinediv2.appendChild(timelinep);
							// 	timelinediv2.appendChild(timelinespan);
								
							// 	timelineli.appendChild(timelinediv1);
							// 	timelineli.appendChild(timelinediv2);
							// 	timelineli.appendChild(timelinesmall);
							// 	timelineul.appendChild(timelineli);
								
								break;
							case 4:
							
								timelineul.innerHTML=timelineul.innerHTML+'<li><div class="timeline-icon bg-danger"><i class="feather icon-pause font-medium-2 align-middle"></i></div><div class="timeline-info"><p class="font-weight-bold mb-0">'+'['+data[i].oldperson_id+']  禁止区入侵检测</p><span class="font-small-3">'+data[i].event_desc+'</span></div><small class="text-muted">'+data[i].event_location+'    '+data[i].event_date+'</small></li>'
								
							
								// var timelineli=document.createElement('li');
								// var timelinediv1=document.createElement('div');
								// var timelinediv2=document.createElement('div');
								// var timelinei=document.createElement('i');
								// var timelinep=document.createElement('p');
								// var timelinespan=document.createElement('span');
								// var timelinesmall=document.createElement('small');
								
								// timelinediv1.setAttribute('class',"timeline-icon bg-danger");
								// timelinei.setAttribute('class',"feather icon-pause font-medium-2 align-middle");
								// timelinediv2.setAttribute('class',"timeline-info");
								// timelinep.setAttribute('class',"timeline-icon bg-primary");
								// timelinespan.setAttribute('class',"font-small-3");
								// timelinesmall.setAttribute('class',"text-muted");
								// timelinep.setAttribute('value','['+data[i].oldperson_id+']  禁止区入侵检测');
								// timelinespan.setAttribute('value',data[i].event_desc);
								// timelinesmall.setAttribute('value',data[i].event_location+'    '+data[i].event_date);
								
								// timelinediv1.appendChild(timelinei);
								// timelinediv2.appendChild(timelinep);
								// timelinediv2.appendChild(timelinespan);
								
								// timelineli.appendChild(timelinediv1);
								// timelineli.appendChild(timelinediv2);
								// timelineli.appendChild(timelinesmall);
								// timelineul.appendChild(timelineli);
								
								break;
						}
					}

				}
			});
			
			connect();
		
		}
		function connect() {
			var host = "ws://127.0.0.1:5000/event_ws"
			socket = new WebSocket(host);
			try {
		 
				socket.onopen = function (msg) {
					
				};
		 
				socket.onmessage = function (msg) {
					console.log(msg.data)
					
					myMessage = msg;
					
					if (typeof msg.data == "string") {
						
						var objectString = msg.data;
						myMessage = JSON.parse(msg.data);
						console.log(myMessage.event_type)
						console.log(myMessage.event_type)
						console.log(myMessage.event_date)
						console.log(myMessage.event_location)
						console.log(myMessage.event_desc)
						console.log(myMessage.oldperson_id)
						toastr.warning('老人'+myMessage.oldperson_id+'  '+myMessage.event_type, myMessage.event_date+'  '+myMessage.event_location+'  '+myMessage.event_desc, { "showMethod": "slideDown", "hideMethod": "slideUp","showMethod": "fadeIn", "hideMethod": "fadeOut",positionClass: 'toast-top-right', containerId: 'toast-top-right' });
					}
					else {
						alert("非文本消息");
					}
				};
		 
				// socket.onclose = function (msg) { alert("socket closed!") };
			}
			catch (ex) {
				log(ex);
			}
		}
		 
		function send(msg) {
			
			socket.send(msg);
		
		}
		 
		window.onbeforeunload = function () {
			try {
				socket.close();
				socket = null;
			}
			catch (ex) {
			}
		};
		 
		function $(id) { return document.getElementById(id); }
		function onkey(event) { if (event.keyCode == 13) { send(); } }
	</script>
    <!-- BEGIN: Vendor JS-->
    <script src="../static/app-assets/vendors/js/vendors.min.js"></script>
    <!-- BEGIN Vendor JS-->

    <!-- BEGIN: Page Vendor JS-->
    <script src="../static/app-assets/vendors/js/charts/apexcharts.min.js"></script>
    <script src="../static/app-assets/vendors/js/extensions/tether.min.js"></script>
    <script src="../static/app-assets/vendors/js/extensions/shepherd.min.js"></script>
    <!-- END: Page Vendor JS-->

    <!-- BEGIN: Theme JS-->
    <script src="../static/app-assets/js/core/app-menu.js"></script>
    <script src="../static/app-assets/js/core/app.js"></script>
    <script src="../static/app-assets/js/scripts/components.js"></script>
    <!-- END: Theme JS-->

    <!-- BEGIN: Page JS-->
    <script src="../static/app-assets/js/scripts/pages/dashboard-analytics.js"></script>
    <!-- END: Page JS-->
	
	<!-- BEGIN: Page Vendor JS-->
	<script src="../static/app-assets/vendors/js/charts/echarts/echarts.min.js"></script>
	<!-- END: Page Vendor JS-->
	
	<!-- BEGIN: Page JS-->
	<script src="../static/app-assets/js/scripts/charts/chart-echart.js"></script>
	<!-- END: Page JS-->

		<script src="../static/app-assets/vendors/js/extensions/toastr.min.js"></script>
	<script src="https://cdn.staticfile.org/jquery/3.4.0/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	
	<!-- BEGIN: Page Vendor JS-->
	<script src="../static/app-assets/vendors/js/tables/datatable/pdfmake.min.js"></script>
	<script src="../static/app-assets/vendors/js/tables/datatable/vfs_fonts.js"></script>
	<script src="../static/app-assets/vendors/js/tables/datatable/datatables.min.js"></script>
	<script src="../static/app-assets/vendors/js/tables/datatable/datatables.buttons.min.js"></script>
	<script src="../static/app-assets/vendors/js/tables/datatable/buttons.html5.min.js"></script>
	<script src="../static/app-assets/vendors/js/tables/datatable/buttons.print.min.js"></script>
	<script src="../static/app-assets/vendors/js/tables/datatable/buttons.bootstrap.min.js"></script>
	<script src="../static/app-assets/vendors/js/tables/datatable/datatables.bootstrap4.min.js"></script>
	<!-- END: Page Vendor JS-->
	
	<!-- BEGIN: Page JS-->
	<script src="../static/app-assets/js/scripts/datatables/datatable.js"></script>
	<!-- END: Page JS-->
	
	
</body>
<!-- END: Body-->

</html>